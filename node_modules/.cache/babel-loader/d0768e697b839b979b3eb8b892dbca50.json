{"ast":null,"code":"import _classCallCheck from\"E:/wamp64/www/cryptolisting/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"E:/wamp64/www/cryptolisting/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"E:/wamp64/www/cryptolisting/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"E:/wamp64/www/cryptolisting/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,useState}from'react';import Modal from'./Modal/Modal';import axios from'axios';import CoinImg from'../img/1.jpg';import ReactTimeAgo from'react-time-ago';import TimeAgo from'javascript-time-ago';import en from'javascript-time-ago/locale/en.json';import ru from'javascript-time-ago/locale/ru.json';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";TimeAgo.addDefaultLocale(en);var Promoted=/*#__PURE__*/function(_Component){_inherits(Promoted,_Component);var _super=_createSuper(Promoted);function Promoted(props){var _this;_classCallCheck(this,Promoted);_this=_super.call(this,props);_this.modalOpen=function(id,count){_this.setState({addVoteData:{id:id,count:count},show:true});};_this.updateVote=function(){var _this$state$addVoteDa=_this.state.addVoteData,id=_this$state$addVoteDa.id,count=_this$state$addVoteDa.count;_this.setState({isLoading:true});axios.post(\"https://listingapp.cryptolisting.com/admin/api/addVoteCount\",{id:id,count:count}).then(function(response){axios.get('https://listingapp.cryptolisting.com/admin/api/coinsApproved/').then(function(res){_this.setState({coins:res.data});//console.log(this.state.coins);\n}).catch(function(error){console.log(error);});_this.setState({show:false,addVoteData:{id:id,count:count},isLoading:false});}).catch(function(error){_this.setState({isLoading:false});console.log(error.response);});};_this.state={coins:[],show:false,setShow:false,addVoteData:{id:\"\",count:\"\"},isLoading:false};return _this;}_createClass(Promoted,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('https://listingapp.cryptolisting.com/admin/api/coinsApproved/').then(function(res){_this2.setState({coins:res.data});//console.log(this.state.coins);\n}).catch(function(error){console.log(error);});}},{key:\"modalClose\",value:function modalClose(e){this.setState({show:false});}},{key:\"render\",value:function render(){var _this3=this;var addVoteData=this.state.addVoteData;var coinsDetails=[];if(this.state.coins.length){coinsDetails=this.state.coins.map(function(res,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",className:\"img-fluid rounded-circle shadow-lg\",src:'http://localhost:8000/storage/coin_logo/'+res.logo,width:\"50\",height:\"50\"})}),/*#__PURE__*/_jsx(\"td\",{children:res.name}),/*#__PURE__*/_jsx(\"td\",{children:res.symbol}),/*#__PURE__*/_jsx(\"td\",{children:res.chain}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-pill badge-primary text-uppercase\",children:/*#__PURE__*/_jsx(ReactTimeAgo,{date:res.launch})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return _this3.modalOpen(res.id,res.votes);},className:\"button gray\",children:[\" \",res.votes,\" \"]})})]});});}return/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 col-md-12 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"utf_dashboard_list_box\",children:[/*#__PURE__*/_jsx(\"h4\",{style:{textAlign:'center'},children:\"Promoted Coins\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-list-box table-responsive invoices with-icons\",children:[/*#__PURE__*/_jsx(Modal,{title:\"Add Vote\",onClose:function onClose(event){return _this3.modalClose(event);},show:this.state.show,updateVote:this.updateVote,children:/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure to add your vote?\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Coin name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Chain\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Launch\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Votes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:coinsDetails})]})]})]})});}}]);return Promoted;}(Component);export default Promoted;","map":{"version":3,"sources":["E:/wamp64/www/cryptolisting/frontend/src/components/Promoted.js"],"names":["React","Component","useState","Modal","axios","CoinImg","ReactTimeAgo","TimeAgo","en","ru","addDefaultLocale","Promoted","props","modalOpen","id","count","setState","addVoteData","show","updateVote","state","isLoading","post","then","response","get","res","coins","data","catch","error","console","log","setShow","e","coinsDetails","length","map","i","logo","name","symbol","chain","launch","votes","textAlign","event","modalClose"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react';\r\nimport Modal from './Modal/Modal';\r\nimport axios from 'axios';\r\nimport CoinImg from '../img/1.jpg';\r\n\r\nimport ReactTimeAgo from 'react-time-ago';\r\nimport TimeAgo from 'javascript-time-ago'\r\n\r\nimport en from 'javascript-time-ago/locale/en.json';\r\nimport ru from 'javascript-time-ago/locale/ru.json';\r\n\r\nTimeAgo.addDefaultLocale(en);\r\n \r\nclass Promoted extends Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcoins: [],\r\n\t\t\tshow: false,\r\n\t\t\tsetShow: false,\r\n\t\t\taddVoteData: {\r\n\t\t\t\tid: \"\",\r\n\t\t\t\tcount: \"\",\r\n\t\t\t},\r\n\t\t\tisLoading: false,\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\taxios.get('https://listingapp.cryptolisting.com/admin/api/coinsApproved/')\r\n\t\t.then(res => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcoins: res.data\r\n\t\t\t});\r\n\t\t\t//console.log(this.state.coins);\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tconsole.log(error);\r\n\t\t})\r\n\t}\r\n\t\r\n\tmodalOpen = (id, count) => {\r\n\t\tthis.setState({ \r\n\t\t\taddVoteData: { id, count },\r\n\t\t\tshow: true\r\n\t\t});\r\n\t}\r\n\t\r\n\tmodalClose (e) {\r\n\t\tthis.setState({ show: false });\r\n\t}\r\n\t\r\n\tupdateVote = () => {\r\n\t\tlet {\r\n\t\t\tid,\r\n\t\t\tcount\r\n        } = this.state.addVoteData;\r\n\t\t\r\n\t\tthis.setState({\r\n\t\t\tisLoading: true,\r\n        });\r\n\t\t\r\n\t\taxios.post(\"https://listingapp.cryptolisting.com/admin/api/addVoteCount\", {\r\n\t\t\tid,\r\n\t\t\tcount,\r\n\t\t}).then((response) => {\r\n\t\t\taxios.get('https://listingapp.cryptolisting.com/admin/api/coinsApproved/')\r\n\t\t\t.then(res => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcoins: res.data\r\n\t\t\t\t});\r\n\t\t\t\t//console.log(this.state.coins);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t})\r\n            this.setState({\r\n\t\t\t\tshow: false,\r\n\t\t\t\taddVoteData: { id, count },\r\n\t\t\t\tisLoading:false,\r\n            });\r\n\t\t}).catch((error) => {\r\n            this.setState({isLoading:false})\r\n            console.log(error.response);\r\n\t\t});\r\n\t};\r\n  \r\n\trender() {\r\n\t\tconst { addVoteData } = this.state;\r\n\t\tlet coinsDetails = [];\r\n\t\tif (this.state.coins.length) {\r\n\t\t\tcoinsDetails = this.state.coins.map((res, i) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td>{ i+1 }</td>\r\n\t\t\t\t\t\t<td><img alt=\"\" className=\"img-fluid rounded-circle shadow-lg\" src={'http://localhost:8000/storage/coin_logo/'+ res.logo } width=\"50\" height=\"50\" /></td>\r\n\t\t\t\t\t\t<td>{res.name}</td>\r\n\t\t\t\t\t\t<td>{res.symbol}</td>\r\n\t\t\t\t\t\t<td>{res.chain}</td>\r\n\t\t\t\t\t\t<td><span className=\"badge badge-pill badge-primary text-uppercase\"><ReactTimeAgo date={res.launch} /></span></td>\r\n\t\t\t\t\t\t<td><button onClick={() => this.modalOpen(res.id,res.votes) } className=\"button gray\"> {res.votes} </button></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"col-lg-12 col-md-12 mb-4\">\r\n\t\t\t\t<div className=\"utf_dashboard_list_box\">\r\n\t\t\t\t\t<h4 style={{textAlign: 'center'}}>Promoted Coins</h4>\r\n\t\t\t\t\t<div className=\"dashboard-list-box table-responsive invoices with-icons\">\r\n\t\t\t\t\t\t{/* Model for Edit Studnet Record */}\r\n\t\t\t\t\t\t<Modal title=\"Add Vote\" onClose={ (event) => this.modalClose(event) } show={this.state.show} updateVote={this.updateVote}>\r\n\t\t\t\t\t\t\t<p>Are you sure to add your vote?</p>\r\n\t\t\t\t\t\t</Modal>\r\n\t  \r\n\t\t\t\t\t\t<table className=\"table table-hover\">\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>#</th>\r\n\t\t\t\t\t\t\t\t\t<th>Image</th>\r\n\t\t\t\t\t\t\t\t\t<th>Coin name</th>\r\n\t\t\t\t\t\t\t\t\t<th>Symbol</th>\r\n\t\t\t\t\t\t\t\t\t<th>Chain</th>\r\n\t\t\t\t\t\t\t\t\t<th>Launch</th>\r\n\t\t\t\t\t\t\t\t\t<th>Votes</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{coinsDetails}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Promoted;"]},"metadata":{},"sourceType":"module"}